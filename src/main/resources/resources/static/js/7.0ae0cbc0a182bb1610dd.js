webpackJsonp([7],{Kcri:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"allBooks",components:{bookList:e("R1zn").a},data:function(){return{bookList:[],queryLoading:!1,moreLoading:!1,allLoaded:!1,limit:8,start:0}},created:function(){var t=this;this.getDatas().then(function(a){t.bookList=a.data.data,a.data.all===a.data.data.length&&(t.moreLoading=!0)})},methods:{back:function(){this.$router.go(-1)},getDatas:function(){return this.$axios.get("/api/book/addedBooks",{params:{start:this.start,limit:this.limit}})},loadMore:function(){var t=this;this.allLoaded?this.moreLoading=!0:this.queryLoading||(this.moreLoading=!0,this.start+=this.limit,this.getDatas().then(function(a){t.bookList=t.bookList.concat(a.data.data),t.queryLoading=!1,t.moreLoading=!1,t.allLoaded=a.data.all===t.bookList.length}))},handleClick:function(t){this.$router.push("/book/details/"+t.ISBN)}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("mt-header",{attrs:{title:"全部图书",fixed:""}},[e("div",{attrs:{slot:"left"},slot:"left"},[e("mt-button",{attrs:{icon:"back"},on:{click:t.back}})],1)]),t._v(" "),e("div",{ref:"List",staticClass:"book-wrapper"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"moreLoading","infinite-scroll-distance":"20","infinite-scroll-immediate-check":"false"}},[e("div",t._l(t.bookList,function(a,i){return e("book-list",{key:i,attrs:{data:a},nativeOn:{click:function(e){t.handleClick(a)}}})})),t._v(" "),e("div",{staticClass:"more_loading"},[e("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:t.moreLoading&&!t.allLoaded&&t.queryLoading,expression:"moreLoading&&!allLoaded&&queryLoading"}],attrs:{type:"snake",color:"#00ccff",size:8}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.allLoaded,expression:"allLoaded"}]},[t._v("已全部加载")])],1)])])],1)},staticRenderFns:[]};var n=e("C7Lr")(i,o,!1,function(t){e("MMn+")},"data-v-e1f54256",null);a.default=n.exports},"MMn+":function(t,a){}});
//# sourceMappingURL=7.0ae0cbc0a182bb1610dd.js.map