webpackJsonp([15],{bgex:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("wSez"),o=e("6ROu"),l=e.n(o),s={name:"borrowDetails",data:function(){return{data:{title:"",borrowid:"",borrowtime:"",returntime:"",borrowstatus:""}}},filters:{f1:function(t){return""===t?t:l()(+t).format("YYYY-MM-DD")}},computed:{remainDays:function(){return l.a.locale("zh-CN"),l()(+this.data.returntime).toNow(!0)},deductExp:function(){return l.a.locale("zh-CN"),l()(+this.data.returntime).toNow(!0).replace(/[\u4e00-\u9fa5]/,"")},statusName:function(){return{0:"已过期",1:"待取书",2:"未还书",3:"待评价",4:"已还书",8:"已取消",9:"已取消"}[this.data.borrowstatus]}},created:function(){var t=this;this.$axios.get("/api/user/borrowDetails",{params:{borrow_id:this.$route.params.id}}).then(function(a){t.data=a.data})},methods:{back:function(){this.$router.go(-1)},cancle:function(){var t=this;Object(r.MessageBox)({title:"",message:"请确认一下哦~<br/>是否确认取消本次借阅？",showCancelButton:!0,confirmButtonText:"是",cancelButtonText:"否"}).then(function(a){"confirm"===a&&t.$axios.post("/api/user/cancelBorrow",{borrowInfo:{borrow_id:t.data.borrowid}}).then(function(a){0===a.data.code&&t.$router.push("/borrow"),Object(r.MessageBox)({title:"",message:a.data.message,confirmButtonText:"知道了"})})})},renew:function(t){var a=this;this.$axios.post("/api/user/renew",{borrowInfo:{borrow_id:t.borrowid}}).then(function(t){0===t.data.code&&a.$router.push("/borrow"),Object(r.MessageBox)({title:"",message:t.data.message,confirmButtonText:"知道了"})})},comment:function(){this.$router.push("/borrow/comment/"+this.$route.params.id)}},beforeRouteLeave:function(t,a,e){"borrow"===t.name&&(t.meta.keepAlive=!1),e()}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"borrow-deader"},[e("mt-header",{attrs:{title:"借阅详情"}},[e("div",{attrs:{slot:"left"},slot:"left"},[e("mt-button",{attrs:{icon:"back"},on:{click:t.back}})],1)])],1),t._v(" "),e("div",[e("mt-field",{attrs:{label:"书名:",value:t.data.title,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"编号:",value:t.data.borrowid,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"起始日期:",value:t._f("f1")(t.data.borrowtime),readonly:"",disableClear:!0}}),t._v(" "),t.data.returntime?e("mt-field",{attrs:{label:"到期日期:",value:t._f("f1")(t.data.returntime),readonly:"",disableClear:!0}}):t._e(),t._v(" "),e("mt-field",{attrs:{label:"支付押金:",value:"20经验值",readonly:"",disableClear:!0}})],1),t._v(" "),e("div",[1===t.data.borrowstatus?e("div",[e("mt-field",{attrs:{label:"借阅状态:",value:t.statusName,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"",readonly:"",disableClear:!0}},[e("span",{staticStyle:{color:"orange"}},[t._v("请尽快至新大楼20楼xxx处领取，一周后还未领取，将自动取消借阅")])]),t._v(" "),e("mt-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"large"},on:{click:t.cancle}},[t._v("取消借阅")])],1):2===t.data.borrowstatus?e("div",[e("mt-field",{attrs:{label:"借阅状态:",value:t.statusName,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"剩余时间:",value:t.remainDays,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"续借次数:",value:t.data.renew,readonly:"",disableClear:!0}}),t._v(" "),e("mt-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"large",disabled:0===t.data.renew},on:{click:function(a){t.renew(t.data)}}},[t._v("续借")])],1):3===t.data.borrowstatus?e("div",[e("mt-field",{attrs:{label:"借阅状态:",value:t.statusName,readonly:"",disableClear:!0}}),t._v(" "),e("mt-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",size:"large"},on:{click:t.comment}},[t._v("评价")])],1):0===t.data.borrowstatus||4===t.data.borrowstatus?e("div",[e("mt-field",{attrs:{label:"借阅状态:",value:t.statusName,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"过期天数:",value:t.remainDays,readonly:"",disableClear:!0}}),t._v(" "),e("mt-field",{attrs:{label:"扣除经验值:",value:t.deductExp,readonly:"",disableClear:!0}})],1):8===t.data.borrowstatus||9===t.data.borrowstatus?e("div",[e("mt-field",{attrs:{label:"借阅状态:",value:t.statusName,readonly:"",disableClear:!0}}),t._v(" "),5===t.data.borrowstatus?e("mt-field",{attrs:{label:"取消原因:",value:"一周后未取书，系统自动取消借阅",readonly:"",disableClear:!0}}):t._e()],1):t._e()])])},staticRenderFns:[]};var n=e("C7Lr")(s,i,!1,function(t){e("edRD")},"data-v-3495b1d3",null);a.default=n.exports},edRD:function(t,a){}});
//# sourceMappingURL=15.764fbd81f5d64ad1d0f3.js.map