{"version":3,"sources":["webpack:///src/components/commentlist/index.vue","webpack:///./src/components/commentlist/index.vue?d984","webpack:///./src/components/commentlist/index.vue","webpack:///src/views/bookDetails/details.vue","webpack:///./src/views/bookDetails/details.vue?256f","webpack:///./src/views/bookDetails/details.vue"],"names":["commentlist","name","props","data","type","Array","default","filters","dateFormate","value","moment_default","a","locale","fromNow","components_commentlist","render","_vm","this","_h","$createElement","_c","_self","_l","item","index","key","staticClass","attrs","src","userhead","_v","_s","username","score","_f","date","content","staticRenderFns","src_components_commentlist","__webpack_require__","normalizeComponent","ssrContext","details","detailData","selected","commentList","queryLoading","moreLoading","allLoaded","start","limit","components","created","_this","promise_default","all","getDetail","getComment","then","values","list","total","length","f1","author","isArray","join","f2","remain","methods","$axios","get","params","user_id","ISBN","$route","id","back","$router","go","initData","loadMore","_this2","res","concat","borrow","_this3","mint_ui_common","open","text","spinnerType","sendEmail","close","code","push","path","query","book_name","title","book_id","bookId","token","message","Object","confirmButtonText","catch","like","_this4","post","ifLike","cancelLike","_this5","delete","activated","_this6","bookDetails_details","fixed","slot","icon","on","click","to","staticStyle","--aspect-ratio","image","authorArray","commentall","size","likeAll","model","callback","$$v","expression","summary","directives","rawName","infinite-scroll-disabled","infinite-scroll-distance","infinite-scroll-immediate-check","color","$event","class","details_Component","details_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.ecf7bc495282c1b7e918.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class='comment-wrapper' v-for='(item, index) in data' :key='index'>\r\n            <div class='comment-user-item'>\r\n                <img :src='item.userhead' class='comment-user-image'/>\r\n            </div>\r\n            <div class='comment-user-name'><span>{{item.username}}</span></div>\r\n            <div class='comment-user-mark'><span>{{item.score}}</span>分</div>\r\n            <div class='comment-time'>{{item.date | dateFormate}}</div>\r\n            <div class='comment-content'>{{item.content}}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport moment from 'moment'\r\nexport default {\r\n    name: 'commentList', //评价列表\r\n    props: {\r\n        data: {\r\n            type: Array,\r\n            default: []\r\n        }\r\n    },\r\n    filters: {\r\n        //时间格式化，返回几秒前、几分钟前，几天前等\r\n        dateFormate(value) {\r\n            moment.locale('zh-cn');\r\n            return moment(value).fromNow();\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.comment-wrapper {\r\n    display: grid;\r\n    grid-template-columns: 60px 1fr 1fr;\r\n    grid-template-rows: 30px 30px 30px;\r\n    align-items: center;\r\n    // border-top: 1px solid $Mischka;\r\n    grid-column-gap: 10px;\r\n    & + & {\r\n        margin-top: 10px;\r\n    }\r\n    .comment-user-name {\r\n        font-size: 18px;\r\n        font-weight: bold;\r\n    }\r\n    .comment-user-mark {\r\n        text-align: right;\r\n        padding-right: 0.1852rem;\r\n        span {\r\n            color: $Red;\r\n            font-size: 18px;\r\n        }\r\n    }\r\n    .comment-user-item {\r\n        grid-row: 1 / 3;\r\n        .comment-user-image {\r\n            width: 60px;\r\n            height: 60px;\r\n        }\r\n    }\r\n    .comment-content {\r\n        grid-column: 2 / 4;\r\n    }\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/commentlist/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.data),function(item,index){return _c('div',{key:index,staticClass:\"comment-wrapper\"},[_c('div',{staticClass:\"comment-user-item\"},[_c('img',{staticClass:\"comment-user-image\",attrs:{\"src\":item.userhead}})]),_vm._v(\" \"),_c('div',{staticClass:\"comment-user-name\"},[_c('span',[_vm._v(_vm._s(item.username))])]),_vm._v(\" \"),_c('div',{staticClass:\"comment-user-mark\"},[_c('span',[_vm._v(_vm._s(item.score))]),_vm._v(\"分\")]),_vm._v(\" \"),_c('div',{staticClass:\"comment-time\"},[_vm._v(_vm._s(_vm._f(\"dateFormate\")(item.date)))]),_vm._v(\" \"),_c('div',{staticClass:\"comment-content\"},[_vm._v(_vm._s(item.content))])])}))}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-54ae2974\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/commentlist/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54ae2974\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"F:\\\\\\\\图书借阅系统\\\\\\\\book-system\\\\\\\\static\\\\\\\\css\\\\\\\\color.scss\\\"}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54ae2974\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-54ae2974\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/commentlist/index.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div>\r\n        <mt-header title='图书详情' fixed>\r\n            <div slot='left'><mt-button icon=\"back\" @click='back'>返回</mt-button></div>\r\n            <div slot='right'>\r\n                <router-link to='/help'>\r\n                    <mt-button icon=\"help\"></mt-button>\r\n                </router-link>\r\n            </div>\r\n        </mt-header>\r\n        <div class='details-wrapper'>\r\n            <div class='details-info'>\r\n                <div class='details-title'>\r\n                    <h1>{{detailData.title}}</h1>\r\n                </div>\r\n                <div class='details-image' style=\"--aspect-ratio: 4/5;\">\r\n                    <img :src='detailData.image' />\r\n                </div>\r\n                <div class='details-author'>\r\n                    作者：{{detailData.authorArray | f1}}\r\n                </div>\r\n                <div class='details-store'>\r\n                    架上剩余：{{detailData.remain}}\r\n                </div>\r\n                <div class='details-rating'>\r\n                    {{detailData.commentall}}分\r\n                </div>\r\n                <div class='details-like'>\r\n                    <mt-button class='el-icon-third-heart' size=\"small\">{{detailData.likeAll}}</mt-button>\r\n                </div>\r\n            </div>\r\n            <div class='present-comment'>\r\n                <div class='tab-bar-panel'> \r\n                    <mt-tabbar v-model=\"selected\" id='tab-bar' class='tab-bar'>\r\n                        <mt-tab-item id='summary'>\r\n                            <span class='tab-label'>图书介绍</span>\r\n                        </mt-tab-item>\r\n                        <mt-tab-item id='comment'>\r\n                            <span class='tab-label'>\r\n                                图书评论<mt-badge type=\"error\" class='comment-num'>{{commentList.length}}</mt-badge>\r\n                            </span>\r\n                        </mt-tab-item>\r\n                    </mt-tabbar>\r\n                </div>\r\n                <mt-tab-container class='book-list' v-model='selected'>\r\n                    <mt-tab-container-item id='summary'>\r\n                        <p>{{detailData.summary}}</p>\r\n                    </mt-tab-container-item>\r\n                    <mt-tab-container-item id='comment'>\r\n                        <div v-infinite-scroll=\"loadMore\"\r\n                        infinite-scroll-disabled=\"moreLoading\"\r\n                        infinite-scroll-distance=\"20\"\r\n                        infinite-scroll-immediate-check='false'>\r\n                            <comment-list :data='commentList'></comment-list>\r\n                            \r\n                            <!--底部判断是加载图标还是提示“全部加载”-->\r\n                            <div class=\"more_loading\">\r\n                                <mt-spinner type=\"snake\" color=\"#00ccff\" :size=\"8\" v-show=\"moreLoading&&!allLoaded&&queryLoading\"></mt-spinner>\r\n                                <span v-show=\"allLoaded\">已全部加载</span>\r\n                            </div>\r\n                        </div>\r\n                    </mt-tab-container-item>\r\n                    \r\n                </mt-tab-container>\r\n            </div>           \r\n        </div>\r\n        <div class='borrow-toolbar'>\r\n            <div class='toolbar-button'>\r\n                <mt-button v-if='0 === detailData.ifLike' class='el-icon-third-heart' size=\"small\" @click='like()'>喜欢</mt-button>\r\n                <mt-button v-else class='el-icon-third-heart1 color-red' size=\"small\" @click='cancelLike()'>取消喜欢</mt-button>\r\n            </div>\r\n            <div class='borrow-mark' \r\n            :class='0 === detailData.remain? \"bg-disabled\" : \"bg-enabled\"'\r\n            @click='borrow' \r\n            >{{detailData.remain | f2}}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport commentList from '@/components/commentlist/index';\r\nimport {Indicator, MessageBox} from 'mint-ui';\r\nexport default {\r\n    name: 'bookDetails',\r\n    data () {\r\n        return {\r\n            detailData: {}, //图书详情\r\n            selected: 'summary', //页签选择\r\n            commentList: [], //图书评论\r\n            queryLoading: false,\r\n            moreLoading: false,\r\n            allLoaded: false,\r\n            start: 0,\r\n            limit: 5\r\n        }\r\n    },\r\n    components: {\r\n        commentList\r\n    },\r\n    created () {\r\n        Promise.all([this.getDetail(), this.getComment()])\r\n        .then((values) => {\r\n            this.detailData = values[0].data;\r\n            this.commentList = values[1].data.list;\r\n            if (values[1].data.total === values[1].data.list.length) {\r\n                this.moreLoading = true;\r\n            }\r\n        });\r\n    },\r\n    filters: {\r\n        f1 (author) {\r\n            if (Array.isArray(author)) {\r\n                return author.join(',');\r\n            }\r\n        },\r\n        f2 (remain) {\r\n            if (0 === remain) {\r\n                return '架上剩余0本'\r\n            } else {\r\n                return '立即借阅'\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        getDetail () {\r\n            return this.$axios.get('/api/book/details', {\r\n                params: {\r\n                    user_id: '22510',\r\n                    ISBN: this.$route.params.id\r\n                }\r\n            })\r\n        },\r\n        getComment () {\r\n            return this.$axios.get('/api/book/comment', {\r\n                params: {\r\n                    ISBN: this.$route.params.id,\r\n                    start: this.start,\r\n                    limit: this.limit\r\n                }\r\n            })\r\n        },\r\n        back () {\r\n            this.$router.go(-1);\r\n        },\r\n        initData() {\r\n            this.detailData = {};\r\n            this.commentList = [];\r\n        },\r\n        loadMore () {\r\n            if(this.allLoaded){\r\n                this.moreLoading = true;\r\n                return;\r\n            }\r\n            if(this.queryLoading){\r\n                return;\r\n            }\r\n            this.moreLoading = true;\r\n            this.start += this.limit;\r\n            this.getComment()\r\n            .then((res) => {\r\n                this.commentList = this.commentList.concat(res.data.list);\r\n                this.queryLoading = false;\r\n                this.moreLoading = false;\r\n                this.allLoaded = res.data.total === this.commentList.length;\r\n            })\r\n        },\r\n        borrow() {\r\n            //架上剩余0本直接返回\r\n            if (0 === detailData.remain) {\r\n                return;\r\n            }\r\n            Indicator.open({\r\n                text: '邮箱发送中...',\r\n                spinnerType: 'fading-circle'\r\n            });\r\n            this.sendEmail()\r\n            .then((res) => {\r\n                Indicator.close();\r\n                if (0 === res.data.code) {                                                                                              \r\n                    this.$router.push({path: '/confirmEmail', query:{book_name: this.detailData.title,book_id: this.detailData.bookId, token: res.data.message/*验证码*/}});\r\n                } else {\r\n                    MessageBox({\r\n                        title: '',\r\n                        message: res.data.message,\r\n                        confirmButtonText: '知道了'\r\n                    })\r\n                }\r\n            })\r\n            .catch((res) => {\r\n                Indicator.close();\r\n                MessageBox({\r\n                    title: '',\r\n                    message: '请求失败',\r\n                    confirmButtonText: '知道了'\r\n                });\r\n            })\r\n        },\r\n        //喜欢操作\r\n        like() {\r\n            this.$axios.post('/api/user/like', {\r\n                user_id: '22510',\r\n                ISBN: this.detailData.ISBN\r\n            })\r\n            .then((res) => {\r\n                if (0 === res.data.code) {\r\n                    this.detailData.ifLike = 1;\r\n                }\r\n                MessageBox({\r\n                    title: '',\r\n                    message: res.data.message,\r\n                    confirmButtonText: '知道了'\r\n                })\r\n            })\r\n        },\r\n        //取消喜欢\r\n        cancelLike() {\r\n            this.$axios.delete('/api/user/like', {\r\n                params: {\r\n                    user_id: '22510',\r\n                    ISBN: this.detailData.ISBN\r\n                }\r\n            })\r\n            .then((res) => {\r\n                if (0 === res.data.code) {\r\n                    this.detailData.ifLike = 0;\r\n                }\r\n                MessageBox({\r\n                    title: '',\r\n                    message: res.data.message,\r\n                    confirmButtonText: '知道了'\r\n                })\r\n            })\r\n        },\r\n        //验证码发送到邮箱\r\n        sendEmail() {\r\n            return this.$axios.get('/api/user/getVerification', {\r\n                params: {\r\n                    user_id: '22510'\r\n                }\r\n            })\r\n        }\r\n    },\r\n    activated () {\r\n        this.initData();\r\n        this.selected ='summary';\r\n        Promise.all([this.getDetail(), this.getComment()])\r\n        .then((values) => {\r\n            this.detailData = values[0].data;\r\n            this.commentList = values[1].data.list;\r\n        });\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@media screen and (max-width: 320px){\r\n    .details-info {\r\n        grid-template-columns: 90px 1fr 1fr;\r\n        grid-template-rows: 45px 40px 40px 40px;\r\n    }\r\n}\r\n@media screen and (min-width: 330px){\r\n    .details-info {\r\n        grid-template-columns: 120px 1fr 1fr;\r\n        grid-template-rows: 45px 50px 50px 50px;\r\n    }\r\n}\r\n// $img-width: 120px;\r\n//     $img-height: 150px;\r\n.details-wrapper {\r\n    position: absolute;\r\n    top:40px;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 40px;\r\n    background-color: $White;\r\n    display: flex;\r\n    flex-direction: column;\r\n    .details-info {\r\n        display: grid;\r\n        // grid-template-columns: ($img-width) 1fr 1fr;\r\n        // grid-template-rows: 45px ($img-height/3) ($img-height/3) ($img-height/3);\r\n        grid-column-gap: 20px;\r\n        padding-left: 10px;\r\n        align-items: center;\r\n        font-size: 0.3704rem;\r\n        .details-title {\r\n            grid-column: 1 / 4;\r\n            padding: 10px 5px;\r\n            h1 {\r\n                font-size: 0.5556rem;\r\n            }\r\n        }\r\n        .details-image {\r\n            grid-row: 2 / 5;\r\n            position: relative;\r\n            width: 100%; \r\n            height: 100%;\r\n            img {\r\n                // position: absolute;\r\n                // left: 0;\r\n                // top: 0;\r\n                width: 100%; \r\n                height: 100%;\r\n            }\r\n        }\r\n        .details-author {\r\n            grid-column: 2 / 4;\r\n        }\r\n        .details-store {\r\n            grid-column: 2 / 4;\r\n        }\r\n        .details-rating {\r\n            color: $Red;\r\n        }\r\n        .details-like {\r\n            button {\r\n                color: $Red;\r\n                font-size: 0.3704rem;\r\n                border: none;\r\n                box-shadow: none;\r\n                background-color: transparent;\r\n            }\r\n        }\r\n        .details-content {\r\n            display: grid;\r\n            grid-template-columns: 1fr 1fr;\r\n            grid-template-rows: 1fr 1fr 1fr;\r\n            font-size: 0.3704rem;\r\n            align-items: center;\r\n            \r\n        }\r\n        \r\n    }\r\n    .present-comment {\r\n        display: flex;\r\n        flex: 1;\r\n        flex-direction: column;\r\n        .tab-bar-panel {\r\n            position: relative;\r\n            height: 54px;\r\n            .tab-bar {\r\n                background-image: none;\r\n                background-color: $White;\r\n                & > .mint-tab-item {\r\n                    position: relative;\r\n                    background-color: $White;\r\n                    &::after {\r\n                        content: '';\r\n                        position: absolute;\r\n                        bottom: 0;\r\n                        left: 100%;\r\n                        width: 0;\r\n                        border-bottom: 3px solid $Web-Orange;\r\n                        box-sizing: border-box;\r\n                        transition: all .2s linear;\r\n                    }\r\n                }\r\n                & > .is-selected {\r\n                    color: $Web-Orange;\r\n                    &::after {\r\n                        left: 0 !important;\r\n                        width: 100%; \r\n                    }\r\n                }\r\n                // &:first-child {\r\n                //     &::after {\r\n                //         left: 100%;\r\n                //     }\r\n                // }\r\n            }\r\n            .tab-label {\r\n                height: 40px;\r\n                line-height: 40px;\r\n                font-size: 0.3704rem;\r\n                .comment-num {\r\n                    display: inline;\r\n                    margin-left: 5px;\r\n                }\r\n            }\r\n        }\r\n        .book-list {\r\n            flex: 1;\r\n            overflow-y: auto;\r\n            .mint-tab-container-wrap {\r\n                height: 100%;\r\n                .mint-tab-container-item {\r\n                    padding: 0 15px;\r\n                    box-sizing: border-box;\r\n                    & > p {\r\n                        text-indent: 2em;\r\n                        word-break: normal;\r\n                        display: block;\r\n                        -webkit-margin-before: 1em;\r\n                        -webkit-margin-after: 1em;\r\n                        -webkit-margin-start: 0px;\r\n                        -webkit-margin-end: 0px;\r\n                        font: 0.2963rem Helvetica,Arial,sans-serif;\r\n                        line-height: 1.62;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            .more_loading {\r\n                color: $Oslo-Gray;\r\n                display: flex;\r\n                justify-content: center;\r\n            }\r\n        }\r\n    }\r\n}\r\n.is-selected + .mint-tab-item::after {\r\n    left: 0 !important;\r\n}\r\n.borrow-toolbar {\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        display: flex;\r\n        .toolbar-button{\r\n            padding: 0 0.2778rem;\r\n            border-top: 1px solid $Mischka;\r\n            border-left: 1px solid $Mischka;\r\n            height: 40px;\r\n            background-color: $White;\r\n            button {\r\n                border: none;\r\n                box-shadow: none;\r\n                background-color: transparent;\r\n                font-size: 0.3704rem;\r\n            }\r\n        }\r\n        .borrow-mark {\r\n            height: 40px;\r\n            line-height: 40px;\r\n            flex: 1;\r\n            font-size: 0.463rem;\r\n            text-align: center;\r\n        }\r\n    }\r\n    .color-red {\r\n        color: $Red;\r\n    }\r\n    .bg-enabled {\r\n        background-color: $Dodger-Blue;\r\n        color: $White;\r\n    }\r\n    .bg-disabled {\r\n        background-color: $Wild-Sand;\r\n        color: $Napa;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/bookDetails/details.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('mt-header',{attrs:{\"title\":\"图书详情\",\"fixed\":\"\"}},[_c('div',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"},on:{\"click\":_vm.back}},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('router-link',{attrs:{\"to\":\"/help\"}},[_c('mt-button',{attrs:{\"icon\":\"help\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"details-wrapper\"},[_c('div',{staticClass:\"details-info\"},[_c('div',{staticClass:\"details-title\"},[_c('h1',[_vm._v(_vm._s(_vm.detailData.title))])]),_vm._v(\" \"),_c('div',{staticClass:\"details-image\",staticStyle:{\"--aspect-ratio\":\"4/5\"}},[_c('img',{attrs:{\"src\":_vm.detailData.image}})]),_vm._v(\" \"),_c('div',{staticClass:\"details-author\"},[_vm._v(\"\\n                作者：\"+_vm._s(_vm._f(\"f1\")(_vm.detailData.authorArray))+\"\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"details-store\"},[_vm._v(\"\\n                架上剩余：\"+_vm._s(_vm.detailData.remain)+\"\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"details-rating\"},[_vm._v(\"\\n                \"+_vm._s(_vm.detailData.commentall)+\"分\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"details-like\"},[_c('mt-button',{staticClass:\"el-icon-third-heart\",attrs:{\"size\":\"small\"}},[_vm._v(_vm._s(_vm.detailData.likeAll))])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"present-comment\"},[_c('div',{staticClass:\"tab-bar-panel\"},[_c('mt-tabbar',{staticClass:\"tab-bar\",attrs:{\"id\":\"tab-bar\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[_c('mt-tab-item',{attrs:{\"id\":\"summary\"}},[_c('span',{staticClass:\"tab-label\"},[_vm._v(\"图书介绍\")])]),_vm._v(\" \"),_c('mt-tab-item',{attrs:{\"id\":\"comment\"}},[_c('span',{staticClass:\"tab-label\"},[_vm._v(\"\\n                            图书评论\"),_c('mt-badge',{staticClass:\"comment-num\",attrs:{\"type\":\"error\"}},[_vm._v(_vm._s(_vm.commentList.length))])],1)])],1)],1),_vm._v(\" \"),_c('mt-tab-container',{staticClass:\"book-list\",model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[_c('mt-tab-container-item',{attrs:{\"id\":\"summary\"}},[_c('p',[_vm._v(_vm._s(_vm.detailData.summary))])]),_vm._v(\" \"),_c('mt-tab-container-item',{attrs:{\"id\":\"comment\"}},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],attrs:{\"infinite-scroll-disabled\":\"moreLoading\",\"infinite-scroll-distance\":\"20\",\"infinite-scroll-immediate-check\":\"false\"}},[_c('comment-list',{attrs:{\"data\":_vm.commentList}}),_vm._v(\" \"),_c('div',{staticClass:\"more_loading\"},[_c('mt-spinner',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.moreLoading&&!_vm.allLoaded&&_vm.queryLoading),expression:\"moreLoading&&!allLoaded&&queryLoading\"}],attrs:{\"type\":\"snake\",\"color\":\"#00ccff\",\"size\":8}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allLoaded),expression:\"allLoaded\"}]},[_vm._v(\"已全部加载\")])],1)],1)])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"borrow-toolbar\"},[_c('div',{staticClass:\"toolbar-button\"},[(0 === _vm.detailData.ifLike)?_c('mt-button',{staticClass:\"el-icon-third-heart\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.like()}}},[_vm._v(\"喜欢\")]):_c('mt-button',{staticClass:\"el-icon-third-heart1 color-red\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.cancelLike()}}},[_vm._v(\"取消喜欢\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"borrow-mark\",class:0 === _vm.detailData.remain? \"bg-disabled\" : \"bg-enabled\",on:{\"click\":_vm.borrow}},[_vm._v(_vm._s(_vm._f(\"f2\")(_vm.detailData.remain)))])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2a796187\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/bookDetails/details.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a796187\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"F:\\\\\\\\图书借阅系统\\\\\\\\book-system\\\\\\\\static\\\\\\\\css\\\\\\\\color.scss\\\"}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./details.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./details.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./details.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a796187\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./details.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2a796187\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/bookDetails/details.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}